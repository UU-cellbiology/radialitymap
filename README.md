# Radiality map

[ImageJ](https://imagej.nih.gov/ij/)/[FIJI](http://fiji.sc/) macro that splits image to radial and non-radial components using output of [OrientationJ](http://bigwww.epfl.ch/demo/orientation/) plugin.
![radialitymap logo](http://katpyxa.info/software/radialitymap_logo.png "logo")

## How to install and run macro

1. You need to download and install [ImageJ](https://imagej.nih.gov/ij/download.html) or [FIJI](http://fiji.sc/#download) on your computer first.
2. [Download](http://bigwww.epfl.ch/demo/orientation/OrientationJ_.jar) OrientationJ_.jar and place it in the "plugins" folder of ImageJ/FIJI. 
3. Load your image to ImageJ/FIJI. Currently macro works only with 8-/16-/32-bit images.
![example image](http://katpyxa.info/software/radialitymap/image_example.png "example image")
4. Choose the origin of coordinates (center with respect to what image considered radial) using "Point" selection tool:
![point tool](http://katpyxa.info/software/radialitymap/fiji_point_tool.png "point tool")
![example image with dot](http://katpyxa.info/software/radialitymap/image_with_point.png "example image with dot")
5. Go to *Plugins->Macros->Runs..* menu and choose downloaded script file.
  * If you try *Plugins->Macros->Install..* and choose script file, it will appear as a separate row in *Plugins->Macros* menu
![parameters window](http://katpyxa.info/software/radialitymap/parameters_window.png "parameters window") 
6. Choose values of parameters. For "gaussian window" a good initial guess is an approximate thickness of lines on your image. 
Try values 2 times higher or less and see result. 
The difference in "Map calculation method" is not so critical, pick the best one judging from final result.
7. Done!

## Output images

Macro/script generates five extra images. Here is description:  

1. Local orientation map (32-bit) generated by OrientationJ with local directionality angle in each pixel in radians:  
![orientation map](http://katpyxa.info/software/radialitymap/orientation_map.png "orientation map")  
2. Local radiality map (32-bit) ranging from 0 to 1. It is absolute value of cosine of difference between the local orientation angle and the angle of vector drawn from the new origin of coordinates (marked by Point tool) to the current pixel position  
![radiality map](http://katpyxa.info/software/radialitymap/radialitymap.png "radiality map")
